<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
		<script src="http://cdn.peerjs.com/0.3/peer.min.js"></script>
		<script src="main.js"></script>
		<title>Rick And Morty RPS</title>
		<link rel="stylesheet" type="text/css" href="style.css">
	</head>
	<body>
		<input type="code" name="fname" id="connectionCode" ><br>
		<input type="button" id="btnSearch" value="Connect" onclick="connect();" />
  </body>
</html>
<script>

var connection = null;
var peer = null;

function openPeer(){
	peer = new Peer({key: 'qlx08v7esis02j4i'},{'debug':3});

	peer.on('connection', function(conn) {
		connection  = conn;
		console.log('got connection');
		whoAmI = Players.MORTY;
		startGame();
		connection.on('data',handleData);
	});

	peer.on('error', function(err) {
		console.log('error!!' + err);
	 })

	peer.on('open', function(id) {
	  console.log('My peer ID is: ' + id);
	});

}
function isConnected() {
	return connection != null;
}

function sendData(data) {
	connection.send(data);
}

function connect(){
	var connectionCode = $('#connectionCode').val();
	whoAmI = Players.RICK;
	startGame();
	connection = peer.connect(connectionCode);
	connection.on('open', function() {
	  // Receive messages
	  connection.on('data',handleData);
	});
}

function startGame(){
	initCells();
	initPlayers();
	tableCreate();
	currentPlayer = players[1];
	placeSoldiers();
}

openPeer();


</script>
